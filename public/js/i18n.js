// ë‹¤êµ­ì–´ ì§€ì› (i18n)
const translations = {
  ko: {
    // ë¡œê·¸ì¸ í˜ì´ì§€
    loginTitle: 'ELCANTO SCM PORTAL',
    loginSubtitle: 'ë¡œê·¸ì¸í•˜ì—¬ ìƒì‚° í˜„í™©ì„ ê´€ë¦¬í•˜ì„¸ìš”.',
    username: 'ì•„ì´ë””',
    password: 'ë¹„ë°€ë²ˆí˜¸',
    loginButton: 'ë¡œê·¸ì¸',
    accountInquiry: 'ê³„ì • ê´€ë ¨ ë¬¸ì˜',
    accountInquiryText1: 'ì—˜ì¹¸í†  ITíŒ€ì— ë¬¸ì˜í•˜ì—¬',
    accountInquiryText2: 'ê³„ì • ì •ë³´ë¥¼ ë°›ìœ¼ì„¸ìš”.',
    
    // í—¤ë”
    logout: 'ë¡œê·¸ì•„ì›ƒ',
    
    // ì‚¬ì´ë“œë°” ë©”ë‰´
    dashboard: 'ì¢…í•© í˜„í™©',
    orderManagement: 'ìƒì‚° ëª©í‘œì¼ì • ìˆ˜ë¦½',
    analytics: 'ê³µì • ì…ê³ ì§„ì²™ í˜„í™©',
    weeklyReport: 'ì£¼ê°„ ë¦¬í¬íŠ¸',
    manufacturerManagement: 'ìƒì‚°ì—…ì²´ ê´€ë¦¬',
    userManagement: 'ì‚¬ìš©ì ê´€ë¦¬',
    userManual: 'ì‚¬ìš© ë©”ë‰´ì–¼',
    supplierDashboard: 'ë‚´ ëŒ€ì‹œë³´ë“œ',
    supplierOrders: 'ì‹¤ì  ì…ë ¥',
    
    // ê³µí†µ
    all: 'ì „ì²´',
    channel: 'ì±„ë„',
    supplier: 'ìƒì‚°ì—…ì²´',
    search: 'ê²€ìƒ‰',
    save: 'ì €ì¥',
    cancel: 'ì·¨ì†Œ',
    delete: 'ì‚­ì œ',
    edit: 'ìˆ˜ì •',
    add: 'ì¶”ê°€',
    close: 'ë‹«ê¸°',
    confirm: 'í™•ì¸',
    loading: 'ì²˜ë¦¬ ì¤‘...',
    
    // KPI
    onTimeRate: 'ë‚©ê¸° ì¤€ìˆ˜ìœ¨',
    progressRate: 'ì…ê³  ì§„í–‰ë¥ ',
    delayedQty: 'ì§€ì—° ë¬¼ëŸ‰',
    totalQty: 'ì´ ë°œì£¼ëŸ‰',
    
    // ë‚ ì§œ
    startDate: 'ì‹œì‘ì¼',
    endDate: 'ì¢…ë£Œì¼',
    dateRange: 'ë‚ ì§œ ë²”ìœ„',
    
    // ë©”ì‹œì§€
    confirmLogout: 'ë¡œê·¸ì•„ì›ƒ í•˜ì‹œê² ìŠµë‹ˆê¹Œ?',
    confirmDelete: 'ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?',
    saveSuccess: 'ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.',
    deleteSuccess: 'ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.',
    errorOccurred: 'ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.',
    noData: 'ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.',
    
    // ìƒì‚°ì—…ì²´ ëŒ€ì‹œë³´ë“œ
    myOrders: 'ë°°ì •ëœ ë°œì£¼',
    completionRate: 'ì™„ë£Œìœ¨',
    inProgress: 'ì§„í–‰ ì¤‘',
    delayedOrders: 'ì§€ì—° ë°œì£¼',
    recentOrders: 'ìµœê·¼ ë°œì£¼ í˜„í™©',
    style: 'ìŠ¤íƒ€ì¼',
    requiredDelivery: 'ì…ê³ ìš”êµ¬ì¼',
    processRate: 'ê³µì •ë¥ ',
    processProgress: 'ê³µì • ì§„í–‰ë¥ ',
    
    // ì‹¤ì  ì…ë ¥
    performanceInput: 'ì‹¤ì  ì…ë ¥',
    orderDetails: 'ë°œì£¼ ìƒì„¸',
    processName: 'ê³µì •ëª…',
    targetDate: 'ëª©í‘œì¼',
    actualDate: 'ì‹¤ì œ ì™„ë£Œì¼',
    proofPhoto: 'ì¦ë¹™ ì‚¬ì§„',
    uploadPhoto: 'ì‚¬ì§„ ì—…ë¡œë“œ',
    enterDate: 'ë‚ ì§œ ì…ë ¥',
    addPhoto: 'ì‚¬ì§„ ì¶”ê°€',
    
    // ê³µì • ê´€ë ¨
    production: 'ìƒì‚°',
    shipping: 'ìš´ì†¡',
    materialUpper: 'ì›ë‹¨(ê°‘í”¼)',
    materialSole: 'ì›ë‹¨(ì°½)',
    handoConfirm: 'í•¸ë„ ì»¨íŒ',
    cutting: 'ì¬ë‹¨',
    upperMaking: 'ê°‘í”¼ ì œì‘',
    assembly: 'ì¡°ë¦½',
    selfInspection: 'ìì²´ ê²€í’ˆ',
    factoryShipment: 'ê³µì¥ ì¶œí•˜',
    shippingProcess: 'ì¶œí•˜',
    arrival: 'ì…ê³ ',
    
    // ìƒíƒœ
    completed: 'ì™„ë£Œ',
    pending: 'ëŒ€ê¸°',
    delayed: 'ì§€ì—°',
    onTime: 'ì •ìƒ',
    notRegistered: 'ë¯¸ë“±ë¡',
    registrationComplete: 'ë“±ë¡ì™„ë£Œ',
    registering: 'ë“±ë¡ì¤‘',
    
    // ë°œì£¼ ê´€ë¦¬
    orders: 'ë°œì£¼',
    orderNumber: 'ë°œì£¼ë²ˆí˜¸',
    quantity: 'ìˆ˜ëŸ‰',
    orderDate: 'ë°œì£¼ì¼',
    
    // ê¸°íƒ€
    total: 'ì´',
    ä»¶: 'ê±´',
    pieces: 'ê°œ',
  },
  
  en: {
    // Login page
    loginTitle: 'ELCANTO SCM PORTAL',
    loginSubtitle: 'Login to manage production status',
    username: 'Username',
    password: 'Password',
    loginButton: 'Login',
    accountInquiry: 'Account Inquiry',
    accountInquiryText1: 'Please contact',
    accountInquiryText2: 'ELCANTO IT Team for account information.',
    
    // Header
    logout: 'Logout',
    
    // Sidebar menu
    dashboard: 'Dashboard',
    orderManagement: 'Production Schedule',
    analytics: 'Process Progress',
    weeklyReport: 'Weekly Report',
    manufacturerManagement: 'Supplier Management',
    userManagement: 'User Management',
    userManual: 'User Manual',
    supplierDashboard: 'My Dashboard',
    supplierOrders: 'Performance Input',
    
    // Common
    all: 'All',
    channel: 'Channel',
    supplier: 'Supplier',
    search: 'Search',
    save: 'Save',
    cancel: 'Cancel',
    delete: 'Delete',
    edit: 'Edit',
    add: 'Add',
    close: 'Close',
    confirm: 'Confirm',
    loading: 'Processing...',
    
    // KPI
    onTimeRate: 'On-Time Rate',
    progressRate: 'Delivery Progress',
    delayedQty: 'Delayed Quantity',
    totalQty: 'Total Quantity',
    
    // Date
    startDate: 'Start Date',
    endDate: 'End Date',
    dateRange: 'Date Range',
    
    // Messages
    confirmLogout: 'Do you want to logout?',
    confirmDelete: 'Do you want to delete?',
    saveSuccess: 'Saved successfully.',
    deleteSuccess: 'Deleted successfully.',
    errorOccurred: 'An error occurred.',
    noData: 'No data available.',
    
    // Supplier Dashboard
    myOrders: 'Assigned Orders',
    completionRate: 'Completion Rate',
    inProgress: 'In Progress',
    delayedOrders: 'Delayed Orders',
    recentOrders: 'Recent Orders',
    style: 'Style',
    requiredDelivery: 'Required Delivery',
    processRate: 'Process Rate',
    processProgress: 'Process Progress',
    
    // Performance Input
    performanceInput: 'Performance Input',
    orderDetails: 'Order Details',
    processName: 'Process',
    targetDate: 'Target Date',
    actualDate: 'Actual Date',
    proofPhoto: 'Proof Photo',
    uploadPhoto: 'Upload Photo',
    enterDate: 'Enter Date',
    addPhoto: 'Add Photo',
    
    // Process Related
    production: 'Production',
    shipping: 'Shipping',
    materialUpper: 'Material (Upper)',
    materialSole: 'Material (Sole)',
    handoConfirm: 'Hando Confirm',
    cutting: 'Cutting',
    upperMaking: 'Upper Making',
    assembly: 'Assembly',
    selfInspection: 'Self Inspection',
    factoryShipment: 'Factory Shipment',
    shippingProcess: 'Shipping',
    arrival: 'Arrival',
    
    // Status
    completed: 'Completed',
    pending: 'Pending',
    delayed: 'Delayed',
    onTime: 'On Time',
    notRegistered: 'Not Registered',
    registrationComplete: 'Registration Complete',
    registering: 'In Progress',
    
    // Order Management
    orders: 'Orders',
    orderNumber: 'Order No.',
    quantity: 'Quantity',
    orderDate: 'Order Date',
    
    // Others
    total: 'Total',
    ä»¶: 'items',
    pieces: 'pcs',
  }
};

// í˜„ì¬ ì–¸ì–´ (ê¸°ë³¸ê°’: í•œêµ­ì–´)
let currentLanguage = localStorage.getItem('language') || 'ko';

// ì–¸ì–´ ë³€ê²½ í•¨ìˆ˜
export function setLanguage(lang) {
  if (!translations[lang]) {
    console.error(`Language '${lang}' not supported`);
    return;
  }
  
  currentLanguage = lang;
  localStorage.setItem('language', lang);
  
  // HTML lang ì†ì„± ë³€ê²½
  document.documentElement.lang = lang;
  
  // ì–¸ì–´ ë³€ê²½ ì´ë²¤íŠ¸ ë°œìƒ
  window.dispatchEvent(new CustomEvent('languageChanged', { detail: { language: lang } }));
}

// í˜„ì¬ ì–¸ì–´ ê°€ì ¸ì˜¤ê¸°
export function getCurrentLanguage() {
  return currentLanguage;
}

// ë²ˆì—­ í…ìŠ¤íŠ¸ ê°€ì ¸ì˜¤ê¸°
export function t(key) {
  const keys = key.split('.');
  let value = translations[currentLanguage];
  
  for (const k of keys) {
    value = value?.[k];
    if (value === undefined) break;
  }
  
  if (value === undefined) {
    console.warn(`Translation key '${key}' not found for language '${currentLanguage}'`);
    return key;
  }
  
  return value;
}

// ëª¨ë“  ë²ˆì—­ ê°€ì ¸ì˜¤ê¸°
export function getTranslations(lang = currentLanguage) {
  return translations[lang] || translations['ko'];
}

// ì´ˆê¸°í™”
export function initI18n() {
  // ì €ì¥ëœ ì–¸ì–´ ì„¤ì • ë¡œë“œ
  const savedLang = localStorage.getItem('language');
  if (savedLang && translations[savedLang]) {
    setLanguage(savedLang);
  }
  
  console.log(`ğŸŒ Language initialized: ${currentLanguage}`);
}

export default {
  setLanguage,
  getCurrentLanguage,
  t,
  getTranslations,
  initI18n
};
